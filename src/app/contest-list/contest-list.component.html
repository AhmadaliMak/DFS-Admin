<!-- start page title -->
<app-pagetitle title="Contest Management" [breadcrumbItems]="breadCrumbItems"></app-pagetitle>
<!-- end page title -->

<div class="text-end me-1 my-3">
    <button type="button" class="btn btn-primary save-cp-btn w-auto px-4 cursor-pointer" routerLink="/add-contest">
        Add Contest
    </button>
</div>
<div class="row mt-0 custom-datatable">
    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="">
            <div class="">
                <table datatable [dtOptions]="dtOptions" class="table table-striped table-bordered table-sm my-3 w-100">
                    <thead class="table-light">
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Payout</th>
                            <th>Total Winner</th>
                            <th>Guranted</th>
                            <th>Payout Adjust</th>
                            <th>Status</th>
                            <th class="action-table text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let contest of contestData?.data; let in = index;">
                            <td>{{contest?.name | titlecase}}</td>
                            <td>
                                <ng-container *ngIf="contest?.type == 1">Public</ng-container>
                                <ng-container *ngIf="contest?.type == 0">Private</ng-container>
                            </td>
                            <td>{{contest?.date | date:'dd MMMM, y'}}</td>
                            <td>{{contest?.payout | number}}</td>
                            <td>{{contest?.total_winner}}</td>
                            <td>
                                <ng-container *ngIf="contest?.guranted == 1">Yes</ng-container>
                                <ng-container *ngIf="contest?.guranted == 0">No</ng-container>
                            <td>
                                <ng-container *ngIf="contest?.payout_adjust == 1">Yes</ng-container>
                                <ng-container *ngIf="contest?.payout_adjust == 0">No</ng-container>
                            </td>
                            <td>
                                <ng-container *ngIf="contest?.status == 1">Publish</ng-container>
                                <ng-container *ngIf="contest?.status == 0">Draft</ng-container>
                            </td>
                            <td class="action-table-td text-center" style="width: 100px; min-width: 100px;">
                                <!-- *ngIf="contest?.status == 0" -->
                                <i-feather name="edit-2" placement="top" ngbTooltip="Edit" class="cursor-pointer" routerLink="/edit-contest/{{contest?._id}}"></i-feather>
                                <i-feather name="eye" placement="top" ngbTooltip="Details" class="cursor-pointer mx-1" routerLink="/contest-detail/{{contest?._id}}"></i-feather>
                                <!-- <i-feather name="trash-2" placement="top" ngbTooltip="Delete" class="cursor-pointer" (click)="confirmModalOpen(DialogBoxComponent, in, contest._id)"></i-feather> -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<ng-template #DialogBoxComponent let-c="close" let-d="dismiss">
    <div class="modal-body">
        <div class="row mb-3">
            <div class="col-xl-12 col-lg-12 col-md-12 col-12">
                <h4 class="text-themeBlack text-center mb-1 font-size-18 font-weight-500">
                    Do you want to delete this contest?
                </h4>
            </div>
        </div>
        <div class="new-ui-card-action text-center mt-0">
            <button class="btn-new-ui-decline me-3 mb-0" aria-label="Close" (click)="d('Cross click')"
                type="button">No</button>
            <button class="btn-new-ui-accept" type="button"
                (click)="deleteData(currentContestId)">
                Yes
            </button>
        </div>
    </div>
</ng-template>